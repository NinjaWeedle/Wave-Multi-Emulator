//----- Variables -----------------------------------------------------------------------------------------------------

Ahello = 1
arm7.pc = 0
arm7.read_return = 0
arm9.pc = 0
arm9.read_return = 0
bg_mode = 0
c8scrnsize = 0
calc.char = 0
calc.return = 0
calc.temp = 0
calc.temp2 = 0
chip8.audio toggle = 0
chip8.audio_buffer = 0
chip8.blendmode = 0
chip8.delay_timer = 0
chip8.drawflag = 0
chip8.drawmode = 0
chip8.drawplane = 0
chip8.drawtoggle = 0
chip8.drawvariety = 0
chip8.dummy = 0
chip8.dummy2 = 0
chip8.dummy3 = 0
chip8.dummy4 = 0
chip8.dummy5 = 0
chip8.fx0aflag = 0
chip8.HPS = 0
chip8.HPSFlag = 0
chip8.I = 0
chip8.Load/Save_Quirk = 0
chip8.pc = 0
chip8.pitch = 0
chip8.rand = 0
chip8.return = 0
chip8.screenheight = 0
chip8.screenwidth = 0
chip8.Shift_quirk = 0
chip8.sound_timer = 0
chip8.spritewidth = 0
chip8m.collisioncolor = 0
core.byte_return = 0
core.condition_test = 0
core.dummy = 0
core.dummy2 = 0
core.dummy_op = 0
core.instruction_format = 0
core.little_endian = 0
core.op.dummy = 0
core.op.dummy2 = 0
core.read_return = 0
core.rotate_return = 0
core.shift_return = 0
flags.met = 0
import.ascii = 0
import.binary = 0
import.char = 0
import.dummy = 0
import.percent = 0
import.read_return = 0
import.rom_length = 0
import.status = 0
Input = 0
load = 0
op.opcode = 0
op.pos = 0
op.temp = 0
program.done = 0
read.return = 0
read.single.return = 0
rom.name = 0
S = 0
scanX = 0
scanY = 0
SF2091! fix = 0
speed (CPF) = 0
storage.byte = 0
temp = 0
tile_mode = 0
Velocity = 0
VIP jumps = 0
_id = 0
_pitch = 0


//----- Lists ---------------------------------------------------------------------------------------------------------

arm7.registers = { }
arm9.flags = { }
arm9.registers = { }
Boot-128 = { }
chip8.audio = { }
chip8.keyboard = { }
chip8.memory = { }
chip8.registers = { }
chip8.screen = { }
chip8.screen2 = { }
chip8.stack = { }
load = { }
Load ROMs: _rom = { }
mappers = { }
schip8.font = { }
schip8.RPL = { }


//----- Green flag events ---------------------------------------------------------------------------------------------

WhenGreenFlagClicked()
{
    Looks.Hide();
    List.Hide(MainHello);
    List.DeleteAll(MainHello);
}


//----- Broadcast received events -------------------------------------------------------------------------------------

WhenBroadcastReceived(HelloInter)
{
    Event.Broadcast("un-needed broadcast");
    List.Show(MainHello);
    List.Add(MainHello, "Ultimate "Hello,World" Esolang Interpreter Wave edition by oxiti8");
    List.Add(MainHello, ">>>");
    control_clear_counter ?? - probably legacy function from Scratch 2.0;
    Ahello = 1;
    Input = 0;
    Forever
    {
        Sensing.Ask("Type commands here.");
        List.Add(MainHello, Operator.Join(">>>", Sensing.Answer()));
        Input = Sensing.Answer();
        If (((Input == "hw") Or (Input == "H")) Or ((Input == "Hello World") Or ((Input == "Hello, World") Or (Operator.Contains(Input, "Hello") And Operator.Contains(Input, " World")))))
        {
            List.Add(MainHello, "Hello, World!");
        }
        Else
        {
            If (Input == "w")
            {
                List.Add(MainHello, "World!");
            }
            Else
            {
                If (Input == "hh")
                {
                    List.Add(MainHello, "Hello, Hello!");
                }
                Else
                {
                    If (Input == "ww")
                    {
                        List.Add(MainHello, "World, World!");
                    }
                    Else
                    {
                        If (Input == "HWorld h")
                        {
                            List.Add(MainHello, "Hello!");
                        }
                        Else
                        {
                            If (Input == "wh")
                            {
                                List.Add(MainHello, "World, Hello!");
                            }
                            Else
                            {
                                If (Input == "clear")
                                {
                                    List.DeleteAll(MainHello);
                                    List.Show(MainHello);
                                    List.Add(MainHello, "Ultimate "Hello,World" Esolang Interpreter Wave edition by oxiti8");
                                    List.Add(MainHello, ">>>");
                                    Input = 0;
                                }
                                Else
                                {
                                    If (Operator.Join(Operator.LetterOf(Input, 1), Operator.Join(Operator.LetterOf(Input, 2), Operator.Join(Operator.LetterOf(Input, 3), Operator.LetterOf(Input, 4)))) == "load")
                                    {
                                        If Operator.Contains(Input, "Rocket Launcher")
                                        {
                                            _ROM = "00E0A260600761386219D027D127A25E60006118D011700830401214681E69112258600FE09E12246008F018225879FF22586002F015F007300012366001F0183900122C00E0640CC520C640D65174FF34001248691A122EA268D89700EEFF0080808080808080002070707070F85000";
                                            Event.Broadcast("Load_Prebuilt_game");
                                        }
                                        Else
                                        {
                                            If Operator.Contains(Input, "1P Pong")
                                            {
                                                _ROM = "6A026B0C6C3F6D0CA2EADAB6DCD66E0022D4660368026060F015F0073000121AC717770869FFA2F0D671A2EADAB6DCD66001E0A17BFE6004E0A17B02601F8B02DAB68D70C00A7DFE40007D026000601F8D02DCD6A2F0D67186848794603F8602611F871246021278463F1282471F69FF47006901D671122A68026301807080B5128A68FE630A807080D53F0112A2610280153F0112BA80153F0112C880153F0112C26020F01822D48E3422D4663E3301660368FE33016802121679FF49FE69FF12C87901490269016004F0187601464076FE126CA2F2FE33F265F12964146500D4557415F229D45500EE808080808080800000000000";
                                                Event.Broadcast("Load_Prebuilt_game");
                                            }
                                            Else
                                            {
                                                If Operator.Contains(Input, "Breakout")
                                                {
                                                    _ROM = "A2CC6A0661036B086000D01170087BFF3B00120A71027AFF3A00120666006714A2CD6020611ED011631D623F820277FF470012AAFF0AA2CBD23165FFC401340164FFA2CD6C006E04EEA16CFE6E06EEA16C02D01180C4D0114F01129842006401423F64FF430012CE431F12A4A2CBD23182448354D2313F011242431E12986A02FA187601A2CA1288D231C401340164FFC5013501650112426A03FA18A2CBD23173FF1236A2CBD2311228A2CDD011A2F0F633F2656318641BF029D3457305F129D3457305F229D34512C8F080FFFFA2DE63156210D325A2E3631DD32512AAEE8ACE8C8AEE88CC88EE";
                                                    Event.Broadcast("Load_Prebuilt_game");
                                                }
                                                Else
                                                {
                                                    If Operator.Contains(Input, "Pong 2")
                                                    {
                                                        _ROM = "22FC6B0C6C3F6D0CA2EADAB6DCD66E0022D4660368026060F015F0073000121AC717770869FFA2F0D671A2EADAB6DCD66001E0A17BFE6004E0A17B02601F8B02DAB6600CE0A17DFE600DE0A17D02601F8D02DCD6A2F0D67186848794603F8602611F871246001278463F1282471F69FF47006901D671122A68026301807080B5128A68FE630A807080D53F0112A2610280153F0112BA80153F0112C880153F0112C26020F01822D48E3422D4663E3301660368FE33016802121679FF49FE69FF12C87901490269016004F0187601464076FE126CA2F2FE33F265F12964146502D4557415F229D45500EE808080808080800000000000C0C0C000FF006B206C00A2F6DBC47C043C2013026A006B006C1FA2FADAB1DAC17A083A401312A2F66A006B20DBA100EE";
                                                        Event.Broadcast("Load_Prebuilt_game");
                                                    }
                                                    Else
                                                    {
                                                        If Operator.Contains(Input, "Keypad test")
                                                        {
                                                            _ROM = "6014610AF20A00E0F229D0151204";
                                                            Event.Broadcast("Load_Prebuilt_game");
                                                        }
                                                        Else
                                                        {
                                                            If Operator.Contains(Input, "16 color test")
                                                            {
                                                                _ROM = "F301A21860046104D0127102F701D0127102FF01D012121633330F0F5555FFFF00";
                                                                Event.Broadcast("Load_Prebuilt_game");
                                                            }
                                                            Else
                                                            {
                                                                If (Input == "Load CHIP8")
                                                                {
                                                                    Sensing.Ask("Paste CHIP-8 rom in hex now.");
                                                                    _ROM = Sensing.Answer();
                                                                    Event.Broadcast("Load_Prebuilt_game");
                                                                }
                                                                Else
                                                                {
                                                                    Sensing.Ask("Paste CHIP-8 rom in base64 now.");
                                                                    _ROM = Sensing.Answer();
                                                                    Event.Broadcast("Load_base64");
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    Else
                                    {
                                        If (Input == "+")
                                        {
                                            control_incr_counter ?? - probably legacy function from Scratch 2.0;
                                            List.Add(MainHello, control_get_counter ?? - probably legacy function from Scratch 2.0);
                                        }
                                        Else
                                        {
                                            If (Input == "credits")
                                            {
                                                List.Add(MainHello, "Wave Multi-Emulator credits");
                                                List.Add(MainHello, "Concept: @Geotale/@EmulatorsOnScratch");
                                                List.Add(MainHello, "Menu: @Geotale @Executec @oxiti8");
                                                List.Add(MainHello, "WAVE-8: @Geotale @oxiti8 @Kouzeru @52525rr");
                                                List.Add(MainHello, "rrGBC: @52525rr");
                                                List.Add(MainHello, "Nintendo DS Emulator: @Geotale/@EmulatorsOnScratch");
                                                List.Add(MainHello, "Cool NES Emulator: @GenericHeroGuy");
                                                List.Add(MainHello, "Bytepusher: @52525rr");
                                                List.Add(MainHello, "UHWEI Wave Edition: @oxiti8");
                                                List.Add(MainHello, "SI8080: @oxiti8, @Kouzeru for renderer");
                                                List.Add(MainHello, "Music: Purple Planet Music - Chilled - Global Tech, Nintendo 3DS HOME menu BGM, Mario Paint - Special Stamps");
                                                List.Add(MainHello, "Special Thanks: StinkerB06 and Tobiasvl for helping with DXYN ");
                                                List.Add(MainHello, "@AArt1256, @52525rr, and @Kouzeru for help with XO-CHIP");
                                                List.Add(MainHello, "Gulrak for the help with documenting Megachip");
                                                List.Add(MainHello, "CHIP8 Wave logo ROM by @AArt1256");
                                                List.Add(MainHello, "Thanks to everyone who has contributed to the project over the past 3 years!");
                                            }
                                            Else
                                            {
                                                If (Input == "Exit")
                                                {
                                                    List.Add(MainHello, "Exiting...");
                                                    Event.Broadcast("Launch Emulator");
                                                    List.Hide(MainHello);
                                                    List.DeleteAll(MainHello);
                                                    Event.BroadcastAndWait("Launch EmulatorWaitd");
                                                    Event.Broadcast("exit emulator");
                                                    Stop(this script);
                                                }
                                                Else
                                                {
                                                    If (Input == "Set start address")
                                                    {
                                                        Sensing.Ask("What address will Chip8 programs start at?");
                                                        chip8.starting address = (Sensing.Answer() % 65536);
                                                        List.Add(MainHello, Operator.Join("Chip8 starting address set to ", chip8.starting address));
                                                    }
                                                    Else
                                                    {
                                                        If (Input == 9)
                                                        {
                                                            Ahello = 99;
                                                            Repeat Until (Not ((Ahello > 0)))
                                                            {
                                                                If (Ahello == 1)
                                                                {
                                                                    List.Add(MainHello, Operator.Join(Ahello, Operator.Join(" bottle of pop on the wall, ", Operator.Join(Ahello, " bottle of pop."))));
                                                                }
                                                                Else
                                                                {
                                                                    List.Add(MainHello, Operator.Join(Ahello, Operator.Join(" bottles of pop on the wall, ", Operator.Join(Ahello, " bottles of pop."))));
                                                                }
                                                                Ahello += -1;
                                                                If (Ahello > 1)
                                                                {
                                                                    List.Add(MainHello, Operator.Join("Take one down, pass it around, ", Operator.Join(Ahello, " bottles of pop on the wall.")));
                                                                }
                                                                Else
                                                                {
                                                                    If (Ahello == 1)
                                                                    {
                                                                        List.Add(MainHello, Operator.Join("Take one down, pass it around, ", Operator.Join(Ahello, " bottle of pop on the wall.")));
                                                                    }
                                                                    Else
                                                                    {
                                                                        List.Add(MainHello, "Take one down, pass it around, no more bottles of pop on the wall.");
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        Else
                                                        {
                                                            List.Add(MainHello, " ");
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        Input = 0;
    }
}

WhenBroadcastReceived(Load_Prebuilt_game)
{
    List.Add(MainHello, "ROM Loaded!");
}

WhenBroadcastReceived(make_tables)
{
    Call _bitwise init;
    Call generate table(256);
}


//----- Custom blocks -------------------------------------------------------------------------------------------------

Define $incA (warp=false)
{
    Repeat Until ((temp.0[last] == 0) Or (temp.0[last] == ""))
    {
        List.DeleteItem(temp.0, last);
    }
    List.ReplaceItem(temp.0, last, 1);
    Repeat ((8 - List.Length(temp.0)))
    {
        List.Add(temp.0, 0);
    }
}

Define $incB (warp=false)
{
    Repeat Until ((temp.1[last] == 0) Or (temp.1[last] == ""))
    {
        List.DeleteItem(temp.1, last);
    }
    List.ReplaceItem(temp.1, last, 1);
    Repeat ((8 - List.Length(temp.1)))
    {
        List.Add(temp.1, 0);
    }
}

Define generate table(string n) (warp=true)
{
    r.2 = n;
    List.DeleteAll(bin_table);
    Repeat (n)
    {
        List.Add(bin_table, "");
    }
    Repeat (Operator.Round((ln(n) / ln(2))))
    {
        r.0 = 0;
        r.1 = 0;
        r.2 = floor((r.2 / 2));
        Repeat (n)
        {
            List.ReplaceItem(bin_table, (r.0 + 1), Operator.Join(bin_table[(r.0 + 1)], r.1));
            r.0 += 1;
            If ((r.0 % r.2) == 0)
            {
                r.1 = (1 - r.1);
            }
        }
    }
}

Define _bitwise init (warp=true)
{
    List.DeleteAll(temp.0);
    List.DeleteAll(temp.1);
    Repeat (8)
    {
        List.Add(temp.0, 0);
        List.Add(temp.1, 0);
    }
    List.DeleteAll(and_table);
    Repeat (256)
    {
        Repeat (256)
        {
            r.1 = "0b";
            r.0 = 0;
            Repeat (8)
            {
                r.0 += 1;
                r.1 = Operator.Join(r.1, Operator.Round((temp.0[r.0] And temp.1[r.0])));
            }
            Call $incA;
            List.Add(and_table, Operator.Round(r.1));
        }
        Call $incB;
    }
    List.DeleteAll(or_table);
    Repeat (256)
    {
        Repeat (256)
        {
            r.1 = "0b";
            r.0 = 0;
            Repeat (8)
            {
                r.0 += 1;
                r.1 = Operator.Join(r.1, Operator.Round((temp.0[r.0] Or temp.1[r.0])));
            }
            Call $incA;
            List.Add(or_table, Operator.Round(r.1));
        }
        Call $incB;
    }
    List.DeleteAll(xor_table);
    Repeat (256)
    {
        Repeat (256)
        {
            r.1 = "0b";
            r.0 = 0;
            Repeat (8)
            {
                r.0 += 1;
                r.1 = Operator.Join(r.1, Operator.Round((Not ((temp.0[r.0] == temp.1[r.0])))));
            }
            Call $incA;
            List.Add(xor_table, Operator.Round(r.1));
        }
        Call $incB;
    }
}


//----- Orphaned blocks -----------------------------------------------------------------------------------------------

Event.Broadcast("Project not saving fix")

Event.Broadcast("Nuke all lists")


//----- Costumes ------------------------------------------------------------------------------------------------------

costume1.svg
